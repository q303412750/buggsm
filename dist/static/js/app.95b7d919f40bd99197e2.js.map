{"version":3,"sources":["webpack:///./src/App.vue?4c10","webpack:///./src/nmb/util.js","webpack:///./src/nmb/app.js","webpack:///./src/nmb/oauth2/oauth2rely.ts","webpack:///./src/App.vue?eb80","webpack:///./src/App.vue?4d12","webpack:///./src/App.vue","webpack:///./src/nmb/oauth2/routes/index.ts","webpack:///./src/router/index.ts","webpack:///./src/nmb/ModalTip/tipTypes.ts","webpack:///./src/nmb/ModalTip/actions.ts","webpack:///./src/nmb/middleware/authApiMiddleware.ts","webpack:///./src/store/apiUtil.ts","webpack:///./src/store/moudules/test.ts","webpack:///./src/nmb/middleware/afterMiddleware.ts","webpack:///./src/nmb/middleware/index.ts","webpack:///./src/store/index.ts","webpack:///./src/params/config.ts","webpack:///./src/main.ts"],"names":["content","__webpack_require__","module","i","locals","exports","isUndefined","variable","undefined","isEmptyString","length","host","_window$location","window","location","protocol","xss","str","div","document","createElement","text","createTextNode","val","appendChild","innerHTML","replace","getQuery","name","tempArr","temp","queryStr","arguments","unxss","undecode","obj","arr","search","split","len","decodeURIComponent","e","stringToDate","date","test","exec","Date","RegExp","getRandomCode","n","chars","res","Math","ceil","random","getCookie","reg","cookie","match","removeCookie","exp","setTime","getTime","value","encodeURIComponent","toGMTString","setCookie","expiredInSecond","domain","app","params","client_id","home","errorRedirectUrl","showError","err","newWindow","redirect_url","Object","__WEBPACK_IMPORTED_MODULE_0__util__","this","url","code","message","open","href","testVisitor","userAgent","navigator","platform","gecko","ie_upto10","ie_11up","ie","ie_version","documentMode","edge","firefox","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","mobile","mac","chromeOS","windows","__webpack_exports__","rely","__DEV__","defaultParams","client_secret","auth_svr","token_svr","refresh_svr","user_info_svr","logout_svr","local_mode","cookie_duration","cookie_domain","invalidLogonIdentity","tokenRefreshing","userInfo","access_token","success","error","_this","__WEBPACK_IMPORTED_MODULE_1_isomorphic_fetch___default","method","then","json","result","saveLogonUser","userData","user","JSON","stringify","sessionStorage","logonUser","localStorage","getLogonUser","parse","checkLogon","from","next","tokens","getTokens","saveRedirectUrl","saveTokens","updated","clearTokens","isTokenValid","expires_in","resolveAuthCallback","checkClientState","clearClientState","token","headers","Content-Type","body","getRedirectUrl","clearLogonUser","logout","route","doLogoutUrl","doLogout","returnToRedirectUrl","query","path","substr","keys","forEach","key","returnPath","substring","lastIndexOf","auth_return_url","waitTokenRefreshed","setTimeout","prepareRefresh","refresh","oldTokens","refresh_token","reAuth","redirectToAuthUrl","clientState","generateOAuthClientState","_a","oauthState","state","_super","App","__extends","__decorate","vue_class_component_common_default","vue_esm","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","normalizeComponent","selectortype_script_index_0_src_App","ssrContext","onEnter","to","oauth2rely","routes","component","bind","children","beforeEnter","use","vue_router_esm","router_routes","redirect","src_router","mode","base","tipTypes","actions","info","showModalTip","warning","type","data","element_ui_common","customHandle","matchCustomHandles","util","extentMessage","okText","onOk","customErrorHandles","initCustomErrorHandle","push","registerCustomErrorHandle","handle","find","h","clearCustomErrorHandles","apiUtil__this","apiFetchAction","commit","apiPath","types","payload","apiUtil___awaiter","request","useTestData","Promise","reslve","reject","testData","sent","__awaiter","resovle","__assign","Authorization","newAccessToken","newTokens","authApiBefore","opts","config","apiRoot","apiRootPath","apiDomain","apiVersion","indexOf","apiUtil___assign","timeout","Accept","getApiFetchOptions","axios_default","status","failed","catch","demand/getAllDemand","demandcount","alldemand","Workload","Description","Class","level","CreaterName","Makers","MakerName","MakerDepartment","test__this","demandLoading","taskList","getters","getAllDemandApi","context","test___awaiter","geTask","mutations","test__a","afterMiddleware","mutation","endsWith","middleware","store","subscribe","vuex_esm","src_store","Store","modules","strict","plugins","params_config","element_ui_common_default","a","productionTip","assign","el","router","template","components"],"mappings":"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","file":"static/js/app.95b7d919f40bd99197e2.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5eee76e0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/sass-loader/lib/loader.js!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"b0a482d0\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5eee76e0\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/App.vue\n// module id = 19QM\n// module chunks = 6","import app from './app';\nimport rely from './oauth2/oauth2rely';\n\n/**\n * 获取API请求头\n * @param apiPath\n * @param method\n * @param opts\n * @param apiRoot\n * @returns {url: string, method: string, headers: any}\n */\nfunction getApiFetchOptions(apiPath, method = 'GET', opts = {}, apiRoot = null) {\n    let headers = opts.headers || {};\n\n    const apiRootPath = isEmptyString(apiRoot) ? `${app.params.apiDomain}/${app.params.apiVersion}` : apiRoot;\n    if (rely.__DEV__) {\n        apiPath = apiPath.indexOf('?') == -1 ? `${apiPath}?XDEBUG_SESSION_START=PHPSTORM` : `${apiPath}&XDEBUG_SESSION_START=PHPSTORM`;\n    }\n    if (method == 'GET')\n        apiPath = apiPath.indexOf('?') == -1 ? `${apiPath}?__rnd=${getRandomCode(4)}` : `${apiPath}&__rnd=${getRandomCode(4)}`;\n    let endpoint = `${apiRootPath}/${apiPath}`;\n\n    return {\n        ...opts,\n        url: endpoint,\n        method: method,\n        timeout: 1000,\n        //credentials: __DEV__ ? 'include' : 'same-origin', //cookie，开发环境下，因为需要跨域，所以使用include\n        headers: {\n            ...headers,\n            \"Accept\": \"application/json\",\n            \"Content-Type\": headers['Content-Type'] || \"application/json\"\n        }\n    };\n}\n\n/**\n * 检查参数是否为undefined 或者 null\n * @param variable\n * @returns {boolean}\n */\nfunction isUndefined(variable) {\n    if (variable === undefined) return true;\n    if (variable == null) return true;\n    return false;\n}\n\n/**\n * 检查字符串是否为undefined 或 长度为 0\n * @param variable\n * @returns {boolean}\n */\nfunction isEmptyString(variable) {\n    if (isUndefined(variable)) return true;\n    return (variable.length == 0);\n}\n\n/**\n * 获取当前的Host\n * @returns {string}\n */\nfunction host() {\n    const { protocol, host } = window.location;\n    return protocol + '//' + host + '/';\n}\n\n/**\n * 过滤XSS\n * @param  {String}    str 需要过滤的内容\n * @return {String}    显示的内容\n */\nfunction xss(str) {\n    var div = document.createElement(\"div\"),\n        text = document.createTextNode(str), val = '';\n\n    div.appendChild(text);\n    val = div.innerHTML;\n    text = null;\n    div = null;\n\n    return val.replace(/&amp;nbsp;/ig, ' ');\n}\n/**\n * 过滤><,&\n * @param  {String}    str 需要过滤的内容\n * @return {String}    显示的内容\n */\nfunction escape2Html(str) {\n    // var arrEntities={'lt':'<','gt':'>','nbsp':' ','amp':'&','quot':'\"'};\n    str = str.replace(/&lt;/ig, '<');\n    str = str.replace(/&gt;/ig, '>');\n    str = str.replace(/&nbsp;/ig, ' ');\n    str = str.replace(/&amp;/ig, '&');\n    str = str.replace(/&quot;/ig, '\"');\n    return str;\n}\n/**\n * 获取url或者自定义字符串中的参数\n *\n * @param {String} name 不传name则直接返回整个参数对象\n * @param {String} queryStr 自定义字符串\n * @param {Boolean} true 不进行参数XSS安全过滤\n * @param {Boolean} true 不进行自动解码\n * @return {String|Object} 获取到的参数值或者由所有参数组成完整对象\n */\nfunction getQuery(name, queryStr = null, unxss = false, undecode = false) {\n    var str = queryStr || location.search.replace(\"?\", \"\"), tempArr,\n        obj = {}, temp, arr = str.split(\"&\"), len = arr.length;\n\n    if (len > 0) {\n        for (var i = 0; i < len; i++) {\n            try {\n                if ((tempArr = arr[i].split('=')).length === 2) {\n                    temp = undecode ? tempArr[1] : decodeURIComponent(tempArr[1]);\n                    obj[tempArr[0]] = unxss ? temp : xss(temp);\n                }\n            } catch (e) {\n            }\n        }\n    }\n\n    return name ? obj[name] : obj;\n}\n\nfunction formatDate(date, format) {\n    let dateParams = {\n        \"M+\": date.getMonth() + 1,\n        \"d+\": date.getDate(),\n        \"h+\": date.getHours(),\n        \"m+\": date.getMinutes(),\n        \"s+\": date.getSeconds(),\n        \"q+\": Math.floor((date.getMonth() + 3) / 3),\n        \"S+\": date.getMilliseconds()\n    };\n    if (/(y+)/i.test(format)) {\n        format = format.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\n    }\n    for (var k in dateParams) {\n        if (new RegExp(\"(\" + k + \")\").test(format)) {\n            format = format.replace(RegExp.$1, RegExp.$1.length == 1\n                ? dateParams[k] : (\"00\" + dateParams[k]).substr((\"\" + dateParams[k]).length));\n        }\n    }\n    return format;\n}\n\n/**\n * 将时间转换成对应的格式 yyyy-MM-dd hh:mm:ss\n * @param  {string} format 需要转化的格式\n * @param  {object} date   需要转换的时间\n * @return {string}        按照对应格式转换后的时间\n */\nfunction dateToString(date, format) {\n    date = date || new Date();\n    return formatDate(date, format);\n}\n\n/**\n * 将string转换成时间\n * @param  {string} date    需要转成的字符串\n * @param  {string} split   默认为 '-'，如果显示为‘/’可不传\n * @return {object}         返回时间对象 or 返回本身\n */\nfunction stringToDate(date, split) {\n    if (typeof date == 'string') {\n        // 匹配 2017-04-10T07:41:24.944Z GMT 时间，不做处理，直接进行转换\n        let test = /([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))[ T](([01][0-9]|2[0-4]):([0-5][0-9]):([0-5][0-9])).([0-9][0-9][0-9][zZ])/ig.exec(date);\n        if ((!isUndefined(test)) && test.length > 0)\n            return new Date(date);\n        // 匹配可能的时间格式 2017-04-10 2017/04/10 处理手工拼接的日期字符串\n        test = /([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})[-/](((0[13578]|1[02])[-/](0[1-9]|[12][0-9]|3[01]))|((0[469]|11)[-/](0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))[ T](([01][0-9]|2[0-4]):([0-5][0-9]):([0-5][0-9]))/ig.exec(date);\n        if ((!isUndefined(test)) && test.length > 0) {\n            split = split || '-';\n            return new Date(test[0].replace(new RegExp(split, 'gm'), '/').replace(new RegExp('T', 'gm'), ' '));\n        }\n    }\n    return date;\n}\n\nfunction getDateDiff(dateTimeStamp) {\n    const minute = 1000 * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    const halfamonth = day * 15;\n    const month = day * 30;\n    const now = new Date().getTime();\n    const diffValue = now - dateTimeStamp;\n    if (diffValue < 0) {\n        return;\n    }\n    const monthC = diffValue / month;\n    const weekC = diffValue / (7 * day);\n    const dayC = diffValue / day;\n    const hourC = diffValue / hour;\n    const minC = diffValue / minute;\n    let result = '';\n    if (monthC >= 1) {\n        result = '' + parseInt(monthC) + '月前';\n    }\n    else if (weekC >= 1) {\n        result = '' + parseInt(weekC) + '周前';\n    }\n    else if (dayC >= 1) {\n        result = '' + parseInt(dayC) + '天前';\n    }\n    else if (hourC >= 1) {\n        result = '' + parseInt(hourC) + '小时前';\n    }\n    else if (minC >= 1) {\n        result = '' + parseInt(minC) + '分钟前';\n    } else\n        result = '刚刚';\n    return result;\n}\n\nfunction getRandomCode(n) {\n    const chars = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n    let res = \"\";\n    for (let i = 0; i < n; i++) {\n        let id = Math.ceil(Math.random() * 35);\n        res += chars[id];\n    }\n    return res;\n}\n\n// region 读写cookie\nfunction getCookie(name) {\n    let arr;\n    const reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\n    if (arr = document.cookie.match(reg))\n        return decodeURIComponent(arr[2]);\n    else\n        return undefined;\n}\nfunction removeCookie(name) {\n    let exp = new Date();\n    exp.setTime(exp.getTime() - 1);\n    const value = getCookie(name);\n    if (!isUndefined(value))\n        document.cookie = `${name}=${encodeURIComponent(value)}expires=${exp.toGMTString()}`;\n}\nfunction setCookie(name, value, expiredInSecond = 0, domain = '') {\n    let cookie = `${name}=${encodeURIComponent(value)};path=/`;\n    if (expiredInSecond > 0) {\n        let exp = new Date();\n        exp.setTime(exp.getTime() + expiredInSecond * 1000);\n        cookie = `${cookie};expires=${exp.toGMTString()}`;\n    }\n    if (!isEmptyString(domain)) {\n        cookie = `${cookie};domain=${domain}`;\n    }\n    document.cookie = cookie;\n}\n// endregion\n\n// region deep assign\n// endregion\n\nfunction bytesToSize(bytes) {\n    if (bytes === 0) return '0 B';\n    var k = 1024, // or 1024\n        sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\n        i = Math.floor(Math.log(bytes) / Math.log(k));\n\n    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n}\n\nexport {\n    isUndefined,\n    isEmptyString,\n    host,\n    xss,\n    getQuery,\n    dateToString,\n    stringToDate,\n    getLocalApiFetchOptions,\n    getApiFetchOptions,\n    apiFetchAction,\n    getDateDiff,\n    getRandomCode,\n\n    getCookie,\n    removeCookie,\n    setCookie,\n\n    bytesToSize,\n    escape2Html\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/util.js","import { isUndefined, isEmptyString } from './util';\n\nconst app = {\n    // export default{\n    params: {\n        client_id: '',\n        home: '',\n        errorRedirectUrl: 'https://pps.mingyuanyun.com/help/exception/',\n    },\n\n    /**\n     * 跳转至 pps 提供的通用错误页面\n     * @param err\n     * @param newWindow\n     * @param redirect_url\n     */\n    showError(err, newWindow = false, redirect_url = '') {\n        if (isUndefined(err))\n            return;\n        if (isEmptyString(redirect_url))\n            redirect_url = this.params.home;\n        // TODO: 这里最好是对ERR有个检查\n        let url = `${this.params.errorRedirectUrl}${err.code}/${encodeURIComponent(err.name)}/${encodeURIComponent(err.message)}`;\n        url = `${url}?redirect_url=${encodeURIComponent(redirect_url)}`;\n        newWindow ? window.open(url) : (window.location.href = url);\n    },\n\n\n    testVisitor: () => {\n        const userAgent = navigator.userAgent;\n        const platform = navigator.platform;\n\n        app.gecko = /gecko\\/\\d/i.test(userAgent);\n        app.ie_upto10 = /MSIE \\d/.test(userAgent);\n        app.ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n        app.ie = app.ie_upto10 || app.ie_11up;\n        app.ie_version = app.ie && (app.ie_upto10 ? document.documentMode || 6 : app.ie_11up[1]);\n        app.edge = /Edge\\/(\\d)/i.test(userAgent);\n        app.firefox = /Firefox\\/(\\d)/i.test(userAgent);\n        app.webkit = /WebKit\\//.test(userAgent);\n        app.qtwebkit = app.webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n        app.chrome = /Chrome\\//.test(userAgent);\n        app.presto = /Opera\\//.test(userAgent);\n        app.safari = /Apple Computer/.test(navigator.vendor);\n        app.mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n        app.phantom = /PhantomJS/.test(userAgent);\n\n        app.ios = /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n        // This is woefully incomplete. Suggestions for alternative methods welcome.\n        app.mobile = app.ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n        app.mac = app.ios || /Mac/.test(platform);\n        app.chromeOS = /\\bCrOS\\b/.test(userAgent);\n        app.windows = /win/i.test(platform);\n    }\n}\n\nexport default app;\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/app.js","import { host, getQuery, isUndefined, isEmptyString, stringToDate, setCookie, getCookie, removeCookie } from '../util';\nimport fetch from 'isomorphic-fetch';\nimport VueRouter, { Route } from 'vue-router';\n\nconst rely = {\n    __DEV__: process.env.NODE_ENV === 'development',\n\n    defaultParams: {\n        client_id: 'p',\n        // client_secret: '',\n        client_secret: 'fPeYyY2F8aaKGx2MtKELuF_AOAvtIoA_9Dvn1kyDfUpRFeTbb44D9afu3OBr5-qDP0bL6FcsCBpVZGsg3ZuqrMxmJ5gjJkzJTue6BcG2N26llNKG4-_0Ux4A9pr6OmWjnv7TCy27QAToqDaX_bivYtlAcUmOp2Mt1TwdlMZ2B10 ',\n        auth_svr: 'https://pas.mingyuanyun.com/auth',\n        token_svr: 'https://pas.mingyuanyun.com/token',\n        refresh_svr: 'https://pas.mingyuanyun.com/refresh',\n        user_info_svr: 'https://pas.mingyuanyun.com/user-info',\n        logout_svr: 'https://pas.mingyuanyun.com/logout',\n        local_mode: 'localStorage',\n        cookie_duration: 129600,\n        cookie_domain: '.mingyuanyun.com'\n    },\n\n    invalidLogonIdentity: {\n        name: 'InvalidLogonIdentityException',\n        code: 100110,\n        message: '未能检测到有效的登录身份，请重新登录'\n    },\n\n    tokenRefreshing: false,\n\n    /* 获取用户信息 过程 ================================================================================================ */\n    userInfo(access_token: string, success: any, error: any) {\n        fetch(\n            `${this.defaultParams.user_info_svr}/${access_token}`,\n            {\n                method: 'GET'\n            }).then((res) => {\n                res.json().then((json) => {\n                    if (json.result) {\n                        this.saveLogonUser(json.userData);\n                        success();\n                    } else {\n                        error(json.userData);\n                    }\n                });\n            });\n    },\n\n    /**\n     * 将拉取到登录用户的 user info 保存在 localStorage 中\n     * @param user\n     */\n    saveLogonUser(user: any) {\n        if (this.defaultParams.local_mode === 'cookie') {\n            setCookie('__myt_auth_user',\n                JSON.stringify(user),\n                this.defaultParams.cookie_duration,\n                this.__DEV__ ? '' : this.defaultParams.cookie_domain);\n        } else if (this.defaultParams.local_mode === 'sessionStorage') {\n            sessionStorage.logonUser = JSON.stringify(user);\n        } else {\n            localStorage.logonUser = JSON.stringify(user);\n        }\n    },\n\n    /**\n     * 获取 localStorage 中保存的 user info\n     * @returns mixed\n     */\n    getLogonUser() {\n        try {\n            const logonUser = (this.defaultParams.local_mode === 'cookie' ? getCookie('__myt_auth_user') :\n                (this.defaultParams.local_mode === 'sessionStorage' ? sessionStorage.logonUser\n                    : localStorage.logonUser));\n\n            return logonUser === undefined ? undefined : JSON.parse(logonUser);\n        } catch (e) {\n            return undefined;\n        }\n    },\n\n    checkLogon(from: Route, next: any) {\n        const userInfo = this.getLogonUser();\n        const tokens = this.getTokens();\n        if (userInfo === undefined || tokens === undefined || isEmptyString(tokens.access_token)) {\n            this.saveRedirectUrl(from);\n            next('/__oauth2/auth');\n        }\n    },\n\n    /* 处理身份缓存 ===================================================================================================== */\n    /**\n     * 将申请或刷新得到的tokens保存在 localStorage 中\n     * @param tokens\n     */\n    saveTokens(tokens: any) {\n        tokens.updated = new Date();\n        if (this.defaultParams.local_mode === 'cookie') {\n            setCookie('__myt_auth_token',\n                JSON.stringify(tokens),\n                this.defaultParams.cookie_duration,\n                this.__DEV__ ? '' : this.defaultParams.cookie_domain);\n        } else if (this.defaultParams.local_mode === 'sessionStorage') {\n            sessionStorage.tokens = JSON.stringify(tokens);\n        } else {\n            localStorage.tokens = JSON.stringify(tokens);\n        }\n\n    },\n\n    /**\n     * 获取 localStorage 中保存的 tokens\n     * @returns mixed\n     */\n    getTokens() {\n        try {\n            const tokens = (this.defaultParams.local_mode === 'cookie' ? getCookie('__myt_auth_token') :\n                (this.defaultParams.local_mode === 'sessionStorage' ? sessionStorage.tokens : localStorage.tokens));\n\n            return tokens === undefined ? undefined : JSON.parse(tokens);\n        } catch (e) {\n            return undefined;\n        }\n    },\n\n    /**\n     * 从 localStorage 中删除保存的 tokens\n     */\n    clearTokens() {\n        if (this.defaultParams.local_mode === 'cookie') {\n            removeCookie('__myt_auth_token');\n        } else if (this.defaultParams.local_mode === 'sessionStorage') {\n            delete sessionStorage.tokens;\n        } else {\n            delete localStorage.tokens;\n        }\n    },\n\n    isTokenValid(tokens: any) {\n        if (isUndefined(tokens)) return false;\n        if (isEmptyString(tokens.access_token) || isUndefined(tokens.expires_in)\n            || isUndefined(tokens.updated)) return false;\n        // 检查 accessToken 是否还在有效期\n        try {\n            const ms = (new Date()).getTime() - stringToDate(tokens.updated, '-').getTime();\n\n            return (ms <= ((tokens.expires_in - 10) * 1000));\n        } catch (e) {\n            return false;\n        }\n    },\n\n    /* 申请 Token 过程 ======================================================================= */\n\n    /**\n     * 解析授权成功后的授权码回调\n     */\n    resolveAuthCallback() {\n        const result = this.checkClientState();\n        this.clearClientState();\n\n        return {\n            result,\n            code: getQuery('code'),\n            error: result ? undefined : {\n                name: 'ClientStateExpiredException',\n                code: 100111,\n                message: '客户端状态已失效，请重新登录'\n            }\n        };\n    },\n\n    /**\n     * 获取token\n     */\n    token(code: number, success: any, error: any) {\n        fetch(\n            this.defaultParams.token_svr,\n            {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n                // tslint:disable-next-line:max-line-length\n                body: `grant_type=authorization_code&client_id=${this.defaultParams.client_id}&client_secret=${this.defaultParams.client_secret}&code=${code}&redirect_uri=${this.getRedirectUrl()}`\n            }).then((res) => {\n                res.json().then((json) => {\n                    if (json.result) {\n                        const tokens = json.userData;\n                        // 保存token\n                        this.saveTokens(tokens);\n                        success(tokens.access_token);\n                    } else {\n                        error(json.userData);\n                    }\n                });\n            });\n    },\n\n    /**\n     * 从 localStorage 中删除保存的 user info\n     */\n    clearLogonUser() {\n        if (this.defaultParams.local_mode === 'cookie') {\n            removeCookie('__myt_auth_user');\n        } else if (this.defaultParams.local_mode === 'sessionStorage') {\n            delete sessionStorage.logonUser;\n        } else {\n            delete localStorage.logonUser;\n        }\n    },\n\n    /**\n     * 登出\n     */\n    logout(route: Route) {\n        this.saveRedirectUrl(route);\n        // 清除EKP登录记录\n        removeCookie('Email_User');\n        removeCookie('Login_User');\n        const doLogoutUrl = `${host()}__oauth2/logout`;\n        window.location.href = `${this.defaultParams.logout_svr}?redirect_uri=${encodeURIComponent(doLogoutUrl)}`;\n    },\n    /**\n     * 执行登出\n     * @param replace\n     */\n    doLogout() {\n        this.clearLogonUser();\n        this.clearTokens();\n        this.returnToRedirectUrl();\n    },\n\n    /**\n     * 保存回调页面地址\n     */\n    saveRedirectUrl(route: Route) {\n        const query = route.query;\n        let { path } = route;\n        if (path.length > 1 && path.substr(0, 1) === '/') path = path.substr(1);\n        let search = '';\n        Object.keys(query).forEach((key) => {\n            search += key + '=' + query[key] + '&';\n        });\n        search = search.substring(0, search.lastIndexOf('&'));\n        const returnPath = `${path}${search}`;\n        localStorage.auth_return_url = (returnPath === '/' ? '/' : `/${returnPath}`);\n    },\n\n    // tslint:disable-next-line:no-unnecessary-initializer\n    returnToRedirectUrl(replace: VueRouter['replace'] | undefined = undefined) {\n        const url = isEmptyString(localStorage.auth_return_url) ? '/' : localStorage.auth_return_url;\n        if (replace) {\n            replace(url);\n        } else {\n            window.location.href = url;\n        }\n        delete localStorage.auth_return_url;\n    },\n\n    waitTokenRefreshed(next: any) {\n        setTimeout(() => {\n            if (this.tokenRefreshing) {\n                this.waitTokenRefreshed(next);\n            } else {\n                next();\n            }\n        }, 500);\n    },\n\n    prepareRefresh(refresh: any, next: any) {\n        if (this.tokenRefreshing) {\n            // 等待\n            this.waitTokenRefreshed(next);\n        } else {\n            this.tokenRefreshing = true;\n            refresh();\n        }\n    },\n\n    /**\n     * 刷新token\n     * @param success\n     * @param error\n     */\n    refresh(success: any, error: any) {\n        const oldTokens = this.getTokens();\n        if (oldTokens === undefined) error(this.invalidLogonIdentity);\n\n        fetch(\n            this.defaultParams.refresh_svr,\n            {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n                body: `client_id=${this.defaultParams.client_id}&code=${oldTokens.refresh_token}`\n            }).then((res) => {\n                res.json().then((json) => {\n                    if (json.result) {\n                        const tokens = json.userData;\n                        // 保存token\n                        this.saveTokens(tokens);\n                        this.tokenRefreshing = false;\n                        success(tokens.access_token);\n                    } else {\n                        this.tokenRefreshing = false;\n                        error(json.userData);\n                    }\n                });\n            });\n    },\n\n    /**\n     * 重新认证\n     */\n    reAuth() {\n        this.clearLogonUser();\n        this.clearTokens();\n        this.redirectToAuthUrl();\n    },\n\n    /**\n     * 跳转到授权站点\n     */\n    redirectToAuthUrl() {\n        const clientState = this.generateOAuthClientState(6);\n        const { auth_svr, client_id } = this.defaultParams;\n        window.location.href = auth_svr + '?response_type=code&client_id=' + client_id +\n            '&scope=' + '' +\n            '&state=' + clientState +\n            '&redirect_uri=' + encodeURIComponent(this.getRedirectUrl());\n    },\n\n    /**\n     * 获取auth成功之后的跳转地址\n     */\n    getRedirectUrl() {\n        return host() + '__oauth2/callback';\n    },\n\n    /**\n     * 生成客户端随机码\n     * @param n\n     * @returns {string}\n     */\n    generateOAuthClientState(n: number) {\n        const chars = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',\n            'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n        let res = '';\n        for (let i = 0; i < n; i++) {\n            const id = Math.ceil(Math.random() * 35);\n            res += chars[id];\n        }\n        localStorage.oauthState = res;\n\n        return res;\n    },\n\n    /**\n     * 检查客户端随机码\n     * @returns {boolean}\n     */\n    checkClientState() {\n        const state = getQuery('state');\n\n        return !(isEmptyString(localStorage.oauthState) || (state !== localStorage.oauthState));\n    },\n\n    /**\n     * 清除客户端随机码\n     */\n    clearClientState() {\n        delete localStorage.oauthState;\n    }\n};\n\nexport default rely;\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/oauth2/oauth2rely.ts","\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\n\n@Component({\n  name: 'app'\n})\nexport default class App extends Vue {}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5eee76e0\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5eee76e0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!ts-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!ts-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5eee76e0\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Router, { RouteConfig, Route, NavigationGuard } from 'vue-router';\nimport rely from '../oauth2rely';\n\nconst onEnter: NavigationGuard = (to, from, next) => {\n    rely.redirectToAuthUrl();\n};\n\nexport const createRoute = () => ({\n    path: '/__oauth2',\n    component: () => import('./Layout.vue'),\n    children: [\n        {\n            path: 'auth',\n            name: 'auth',\n            beforeEnter: onEnter,\n            component: (): any => import('./auth')\n        },\n        { path: 'callback', name: 'callback', component: (): any => import('./callback') },\n        { path: 'logout', name: 'logout', component: (): any => import('./logout') }\n    ]\n});\n\nexport default createRoute;\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/oauth2/routes/index.ts","import Vue from 'vue';\nimport Router, { RouteConfig, Route, NavigationGuard } from 'vue-router';\nimport oauthRely from '../nmb/oauth2/oauth2rely';\nimport createRoute from '../nmb/oauth2/routes';\n\nVue.use(Router);\n\nconst Login: NavigationGuard = (to, from, next) => {\n  oauthRely.checkLogon(from, next);\n  next();\n};\n\nconst routes: RouteConfig[] = [\n  {\n    path: '/',\n    name: 'home',\n    beforeEnter: Login,\n    component: (): any => import('./test/home.vue'),\n    children: [\n      // {path: 'resource', name: 'resource', component: (): any => import('./resource/home.vue')},\n      {path: 'test', name: 'test', component: (): any => import('./test/home.vue')}\n    ]\n  },\n  { path: '*', redirect: '/' },\n  createRoute()\n];\n\nconst router: Router = new Router({\n  mode: 'history',\n  base: '/',\n  routes\n});\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.ts","export default {\n    info: 'info',\n    success: 'success',\n    warning: 'warning',\n    error: 'error'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/ModalTip/tipTypes.ts","import tipTypes from './tipTypes';\nimport app from '../app';\nimport { isEmptyString } from '../util';\nimport rely from '../oauth2/oauth2rely';\nimport { Message, Option } from 'element-ui';\n\ninterface IData {\n    name: string;\n    code: number;\n    message: string;\n}\n\nexport default {\n    /**\n     * 显示一个消息提示的模态提示框\n     * @param message\n     * @param title\n     */\n    info(message: string) {\n        this.showModalTip(tipTypes.info, { message, code: 0, name: 'info' });\n    },\n\n    /**\n     * 显示一个警告的模态提示框\n     * @param message\n     * @param title\n     */\n    warning(message: string) {\n        this.showModalTip(tipTypes.warning, { message, code: 0, name: 'warning' });\n    },\n\n    /**\n     * 显示一个成功提示的模态提示框\n     * @param message\n     * @param title\n     */\n    success(message: string) {\n        this.showModalTip(tipTypes.success, { message, code: 0, name: 'success' });\n    },\n\n    /**\n     * 显示一个错误的模态提示框\n     * err 参数为错误对象\n     * {\n     *    name: 'InvalidLogonIdentityException',\n     *    code: 100110,\n     *    message: '未能检测到有效的登录身份，请重新登录'\n     * }\n     * @param err\n     * @param title\n     */\n    error(err: IData) {\n        this.showModalTip(tipTypes.error, err);\n    },\n\n    showModalTip(type: string, data: IData) {\n        switch (type) {\n            case tipTypes.info: return Message.info(data.message);\n            case tipTypes.success: return Message.success(data.message);\n            case tipTypes.warning: return Message.warning(data.message);\n            case tipTypes.error: {\n                if (data.code >= 100100 && data.code < 100200) {\n                    rely.reAuth();\n                } else {\n                    const customHandle = this.matchCustomHandles(data);\n                    let extentMessage = '';\n                    let okText = '知道了';\n                    let onOk = '';\n\n                    if (customHandle !== undefined) {\n                        extentMessage = (isEmptyString(customHandle.extentMessage)) ? '' : customHandle.extentMessage;\n                        okText = (isEmptyString(customHandle.okText)) ? '知道了' : customHandle.okText as string;\n                        onOk = customHandle.onOk;\n                    }\n\n                    return Message.error(data.name);\n                }\n            }\n        }\n    },\n\n    customErrorHandles: undefined as undefined | any[],\n\n    initCustomErrorHandle() {\n        this.customErrorHandles = [];\n        this.customErrorHandles.push({\n            key: 'identity',\n            test: (error: IData) => {\n                return (error.code >= 100100 && error.code < 100200);\n            },\n            extentMessage: '',\n            okText: '重新登录',\n            onOk: () => {\n                rely.reAuth();\n            }\n        });\n        this.customErrorHandles.push({\n            key: 'anoToIdentity',\n            test: (error: IData) => {\n                return ((error.code >= 900001 && error.code <= 900002) || (error.code >= 6900017 && error.code <= 6900018));\n            },\n            extentMessage: '若您是明源内部用户，请点击\"切换身份\"按钮重新登录',\n            okText: '切换身份',\n            onOk: () => {\n                rely.reAuth();\n            }\n        });\n    },\n\n    registerCustomErrorHandle(handle: { [key: string]: any }) {\n        if (this.customErrorHandles === undefined) {\n            this.initCustomErrorHandle();\n        }\n        if (this.customErrorHandles !== undefined && this.customErrorHandles.find((h) => h.key === handle.key) === undefined) {\n            this.customErrorHandles.push(handle);\n        }\n    },\n\n    clearCustomErrorHandles() {\n        this.initCustomErrorHandle();\n    },\n\n    matchCustomHandles(error: IData) {\n        if (this.customErrorHandles === undefined) return undefined;\n\n        return this.customErrorHandles.find((handle: any) => handle.test(error));\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/ModalTip/actions.ts","import rely from '../oauth2/oauth2rely';\nimport { modalTip } from '../ModalTip';\n\ninterface IActionPayload {\n    type: string;\n    payload: any;\n}\n\nconst error = (err: any) => {\n    modalTip.error(err);\n};\n\nconst actionWidthAuthorization = (action: IActionPayload, accessToken: string) => {\n    action.payload.headers = { Authorization: `Bearer ${accessToken}` };\n};\n\nexport default async (action: IActionPayload, state: any) => {\n    // 只有api请求才去做验证\n    if (action.type.endsWith('Api')) {\n        if (!action.payload) action.payload = {};\n        action.payload.data = { ...action.payload };\n        // 获取 store 中的tokens\n        const tokens = rely.getTokens();\n        if (rely.isTokenValid(tokens)) {\n            actionWidthAuthorization(action, tokens.access_token);\n        } else {\n            // 刷新token\n            rely.prepareRefresh(\n                () => {\n                    rely.refresh((newAccessToken: string) => {\n                        actionWidthAuthorization(action, newAccessToken);\n                    }, error);\n                },\n                () => {\n                    const newTokens = rely.getTokens();\n                    actionWidthAuthorization(action, newTokens.access_token);\n                }\n            );\n        }\n    }\n};\n\nexport const authApiBefore = async (payload: any) => {\n    const opts = new Promise((resovle, reject) => {\n        if (payload) payload = payload.data = { ...payload };\n        let headers = {};\n        // 获取 store 中的tokens\n        const tokens = rely.getTokens();\n        if (rely.isTokenValid(tokens)) {\n            headers = { Authorization: `Bearer ${tokens.access_token}` };\n        } else {\n            // 刷新token\n            rely.prepareRefresh(\n                () => {\n                    rely.refresh((newAccessToken: string) => {\n                        headers = { Authorization: `Bearer ${newAccessToken}` };\n                    }, error);\n                },\n                () => {\n                    const newTokens = rely.getTokens();\n                    headers = { Authorization: `Bearer ${newTokens.access_token}` };\n                }\n            );\n        }\n        resovle({ headers });\n    });\n\n    return opts;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/middleware/authApiMiddleware.ts","import axios, { AxiosResponse, AxiosRequestConfig } from 'axios';\nimport { isEmptyString, getRandomCode } from '../nmb/util';\nimport app from '../nmb/app';\nimport { Commit } from 'vuex';\nimport test from './moudules/test';\nimport { authApiBefore } from '../nmb/middleware/authApiMiddleware';\n\ninterface ITypes {\n    request: string;\n    success: string;\n    failed: string;\n}\n\nconst getApiFetchOptions = (apiPath: string, method: string = 'GET', opts: { headers?: any } = {}, apiRoot = null) => {\n    const headers = opts.headers || {};\n    const apiRootPath = isEmptyString(apiRoot) ? `${app.params.apiDomain}/${app.params.apiVersion}` : apiRoot;\n\n    if (method === 'GET') {\n        apiPath = apiPath.indexOf('?') === -1 ? `${apiPath}?__rnd=${getRandomCode(4)}` : `${apiPath}&__rnd=${getRandomCode(4)}`;\n    }\n    const endpoint = `${apiRootPath}/${apiPath}`;\n\n    return {\n        ...opts,\n        url: endpoint,\n        method,\n        timeout: 1000,\n        headers: {\n            ...headers,\n            'Accept': 'application/json',\n            'Content-Type': headers['Content-Type'] || 'application/json'\n        }\n    };\n};\n\n/**\n * 与服务器交互数据\n * @param {*} commit\n * @param {*} config\n * @param {*} types\n */\nconst apiFetchAction = async (commit: Commit, apiPath: string, method: string, types: ITypes, payload: any) => {\n    commit(types.request);\n    // 是否使用测试数据\n    if (useTestData) {\n        await new Promise((reslve, reject) => {\n            setTimeout(() => {\n                commit(types.success, { data: testData[apiPath] });\n            }, 500);\n        });\n    } else {\n        const opts = await authApiBefore(payload);\n        const config: AxiosRequestConfig = getApiFetchOptions(apiPath, method, opts);\n        if (method === 'GET' && payload) config.params = payload.data;\n        if (method === 'POST' && payload) config.data = payload.data;\n        await axios(config).then((res: AxiosResponse) => {\n            if (res.status === 200 && res.data.code === 0) {\n                commit(types.success, res.data);\n            } else {\n                commit(types.failed, res.data);\n            }\n        }).catch((err) => {\n            commit(types.failed, err);\n        });\n    }\n};\n\nexport {\n    apiFetchAction\n};\n\n// 如果api请求需要使用模拟数据，这里控制开关\nconst useTestData = true;\n\nconst testData: { [key: string]: any } = {\n    'demand/getAllDemand': {\n        demandcount: 119,\n        message: '这是一个返回需求列表 POST 请求',\n        name: '返回需求列表',\n        alldemand: [\n            { Workload: 1.1, Description: '刘姐', Class: 1, level: 1, CreaterName: '许文强', Makers: [{ MakerName: '姚海啸(old)', MakerDepartment: 'MIP公共主数据组' }] },\n            { Workload: 1.1, Description: '许文强', Class: 1, level: 1, CreaterName: '鹰', Makers: [{ MakerName: '许一妹', MakerDepartment: 'MIP公共主数据组' }] }\n        ]\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/apiUtil.ts","import { MutationTree, GetterTree } from 'vuex';\nimport { Commit, ActionTree } from 'vuex';\nimport { getApiFetchOptions } from '../../nmb/util';\nimport { apiFetchAction } from '../apiUtil';\n\n// 如果是api请求，后缀固定为_REQUEST、 _SUCCESS、_FAILED三种\nconst GET_DEMAND_LIST_REQUEST = 'GET_DEMAND_LIST_REQUEST';\nconst GET_DEMAND_LIST_SUCCESS = 'GET_DEMAND_LIST_SUCCESS';\nconst GET_DEMAND_LIST_FAILED = 'GET_DEMAND_LIST_FAILED';\n\nconst GET_TASK = 'GET_TASK';\n\n// 如果是api请求, 后缀必须是Api\nconst getAllDemandApi = async (context: { commit: Commit, state: IState }, payload: any) => {\n    apiFetchAction(context.commit, `demand/getAllDemand`, 'POST', {\n        request: GET_DEMAND_LIST_REQUEST,\n        success: GET_DEMAND_LIST_SUCCESS,\n        failed: GET_DEMAND_LIST_FAILED\n    }, payload);\n};\n\n// 普通调用action\nconst geTask = (context: { commit: Commit, state: IState }, payload: any) => {\n    context.commit(GET_TASK, payload);\n};\n\nconst actions: ActionTree<IState, any> = {\n    getAllDemandApi,\n    geTask\n};\n\n// 此处定义state类型\nexport interface IState {\n    demandLoading: boolean;\n    alldemand: any[];\n    taskList: any[];\n}\n\nconst initState: IState = {\n    demandLoading: false,\n    alldemand: [],\n    taskList: []\n};\n\nconst getters: GetterTree<IState, any> = {\n    demandLoading: (state: IState) => state.demandLoading,\n    alldemand: (state: IState) => state.alldemand,\n    taskList: (state: IState) => state.taskList\n};\n\nconst mutations: MutationTree<any> = {\n    [GET_DEMAND_LIST_REQUEST](state: IState, payload) {\n        state.demandLoading = true;\n    },\n    [GET_DEMAND_LIST_FAILED](state: IState, payload) {\n        state.demandLoading = false;\n    },\n    [GET_DEMAND_LIST_SUCCESS](state: IState, payload) {\n        state.demandLoading = false;\n        state.alldemand = payload.data.alldemand;\n    },\n\n    [GET_TASK](state: IState, data) {\n       state.taskList.push(data);\n    }\n};\n\nexport default {\n    state: initState,\n    getters,\n    actions,\n    mutations\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/moudules/test.ts","import { MutationPayload } from 'vuex';\nimport { modalTip } from '../ModalTip';\n\nexport default (mutation: MutationPayload, state: any) => {\n    try {\n        const type = mutation.type;\n        if (type.endsWith('_FAILED')) {\n            const payload = mutation.payload;\n            if (payload) {\n                if (mutation.payload.code === 'ECONNABORTED') {\n                    modalTip.error({\n                        message: '网络连接失败',\n                        name: '网络好像在犯迷糊',\n                        code: payload.code || 0\n                    });\n                } else {\n                    modalTip.error({\n                        message: payload.data ? payload.data.code : payload.message,\n                        name: '服务器异常',\n                        code: payload.code || 0\n                    });\n                }\n            }\n        }\n    } catch (err) {\n        modalTip.error({\n            message: '页面异常',\n            name: err.message,\n            code: 10001\n        });\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/middleware/afterMiddleware.ts","import authApiMiddleware from './authApiMiddleware';\nimport authBeforeReduxApiMiddleware from './afterMiddleware';\n\nconst middlewarePlugin = (store: any) => {\n    // TODO: 暂时不在此处使用beforeAction\n    // handler会在action之前执行\n    // store.subscribeAction(authApiMiddleware);\n    // handler会在mutation之后执行\n    store.subscribe(authBeforeReduxApiMiddleware);\n};\n\nexport default middlewarePlugin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/middleware/index.ts","import Vue from 'vue';\nimport Vuex, { ActionTree, MutationTree, Action, Store, MutationPayload } from 'vuex';\nimport test from './moudules/test';\nimport middlewarePlugin from '../nmb/middleware';\n\nVue.use(Vuex);\n\nconst strict = process.env.NODE_ENV !== 'production';\n\nexport default new Vuex.Store({\n    modules: {\n        test\n    },\n    strict: process.env.NODE_ENV !== 'production',\n    plugins: [middlewarePlugin]\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.ts","const __DEV__ = process.env.NODE_ENV === 'development';\n\nexport default {\n    client_id: 'p',\n    home: __DEV__ ? 'https://p.mingyuanyun.com' : 'https://p.mingyuanyun.com',\n    apiDomain: __DEV__ ? 'http://localhost:6788/api' : 'http://localhost:6788/api',\n    apiVersion: 'v1'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/params/config.ts","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport axios from 'axios/index.js';\nimport './style/animate.min.css';\nimport app from './nmb/app';\nimport rely from './nmb/oauth2/oauth2rely';\nimport clientConfig from './params/config';\nimport oauth2 from './params/oauth2';\n\nVue.use(ElementUI);\n\nVue.config.productionTip = false;\napp.params = Object.assign(app.params, clientConfig);\n// rely.defaultParams = Object.assign(rely.defaultParams, oauth2);\n\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  template: '<App/>',\n  components: { App }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}