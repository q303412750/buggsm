{"version":3,"sources":["webpack:///./src/nmb/oauth2/routes/callback.ts"],"names":["Callback","_super","_this","apply","this","arguments","error","err","__WEBPACK_IMPORTED_MODULE_3__app__","showError","tokenSuccess","access_token","__WEBPACK_IMPORTED_MODULE_2__oauth2rely__","userInfo","userInfoSuccess","returnToRedirectUrl","__extends","prototype","beforeMount","authResult","resolveAuthCallback","result","token","code","__decorate","__WEBPACK_IMPORTED_MODULE_1_vue_class_component___default","template","__WEBPACK_IMPORTED_MODULE_0_vue__"],"mappings":"6yBASAA,EAAA,SAAAC,GAHA,SAAAD,IAAA,IAAAE,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAAAD,YAgBEF,EAAAI,MAAQ,SAACC,GACPC,EAAA,EAAIC,UAAUF,IAGhBL,EAAAQ,aAAe,SAACC,GACdC,EAAA,EAAKC,SAASF,EAAcT,EAAKY,gBAAiBZ,EAAKI,QAGzDJ,EAAAY,gBAAkB,WAChBF,EAAA,EAAKG,yBAET,OAxBsCC,EAAAhB,EAAAC,GAEpCD,EAAAiB,UAAAC,YAAA,WACE,IAAMC,EAAaP,EAAA,EAAKQ,sBAGpBD,GAAcA,EAAWE,OAC3BT,EAAA,EAAKU,MAAMH,EAAWI,KAAMnB,KAAKM,aAAcN,KAAKE,OAEpDF,KAAKE,MAAMa,EAAWb,QATPN,EAAQwB,GAH5BC,KACCC,SAAU,yCAES1B,GAArB,CAAsC2B,EAAA","file":"static/js/3.58868054d13662202cc7.js","sourcesContent":["import Vue from 'vue';\nimport Component from 'vue-class-component';\nimport { State, Action, Getter } from 'vuex-class';\nimport rely from '../oauth2rely';\nimport app from '../../app';\n\n@Component({\n  template: '<div><p>登录信息处理中</p><p>请稍候</p></div>'\n})\nexport default class Callback extends Vue {\n\n  beforeMount() {\n    const authResult = rely.resolveAuthCallback();\n\n    // 请求token\n    if (authResult && authResult.result) {\n      rely.token(authResult.code, this.tokenSuccess, this.error);\n    } else {\n      this.error(authResult.error);\n    }\n  }\n\n  error = (err: any) => {\n    app.showError(err);\n  }\n\n  tokenSuccess = (access_token: string) => {\n    rely.userInfo(access_token, this.userInfoSuccess, this.error);\n  }\n\n  userInfoSuccess = () => {\n    rely.returnToRedirectUrl();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/nmb/oauth2/routes/callback.ts"],"sourceRoot":""}